<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cadastro de Grade de Horários</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body class="bg-light">
  <div class="container mt-5">
    <h2 class="mb-4 text-center">Cadastro de Grade de Horários</h2>

    <form id="gradeForm">
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="disciplina">Disciplina</label>
          <select class="form-control" id="disciplina" required>
            <option selected disabled>Selecione a disciplina</option>
            <option>Técnicas de Cozinha</option>
            <option>Nutrição Básica</option>
            <option>Higiene e Manipulação de Alimentos</option>
            <option>Gestão de Alimentos</option>
          </select>
        </div>
        <div class="form-group col-md-6">
          <label for="professor">Professor</label>
          <select class="form-control" id="professor" required>
            <option selected disabled>Selecione o professor</option>
            <option>Chef André</option>
            <option>Prof. Carla</option>
            <option>Prof. Eduardo</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label>Dias da Semana</label><br>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="segunda" value="Segunda">
          <label class="form-check-label" for="segunda">Seg</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="terca" value="Terça">
          <label class="form-check-label" for="terca">Ter</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="quarta" value="Quarta">
          <label class="form-check-label" for="quarta">Qua</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="quinta" value="Quinta">
          <label class="form-check-label" for="quinta">Qui</label>
        </div>
        <div class="form-check form-check-inline">
          <input class="form-check-input" type="checkbox" id="sexta" value="Sexta">
          <label class="form-check-label" for="sexta">Sex</label>
        </div>
      </div>

      <div class="form-group col-md-3">
        <input type="time" class="form-control" id="horario">
        <label for="horario">Horário inicio</label>
      </div>
      <div class="form-group col-md-3">
        <input type="time" class="form-control" id="horario">
        <label for="horario">Horário final </label>
      </div>
      <div class="form-group col-md-3">
        <input type="text" class="form-control" id="sala" placeholder="Ex: Lab Cozinha 1">
        <label for="sala">Disciplina </label>
      </div>
      <div class="form-group col-md-3">
        <input type="text" class="form-control" id="sala" placeholder="Ex: Lab Cozinha 1">
        <label for="sala">Professor </label>
      </div>

      <button type="submit" class="btn btn-primary" id="gradeForm">Adicionar à Grade</button>
      <button type="submit" class="btn btn-success ">finalizar Cadastro</button>
    </form>

    <hr>

    <h4 class="mt-4">Disciplinas na Grade</h4>
    <table class="table table-striped mt-2">
      <thead>
        <tr>
          <th>Disciplina</th>
          <th>Professor</th>
          <th>Dias</th>
          <th>Horário</th>
          <th>Sala</th>
        </tr>
      </thead>
      <div id="gradeTables"></div>
    </table>
  </div>

  <script>
    const diasDaSemana = ["segunda", "terca", "quarta", "quinta", "sexta"];
    const gradePorDia = {
      segunda: [],
      terca: [],
      quarta: [],
      quinta: [],
      sexta: []
    };

    document.getElementById("gradeForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const disciplina = document.getElementById("disciplina").value;
      const professor = document.getElementById("professor").value;
      const horario = document.getElementById("horario").value;
      const sala = document.getElementById("sala").value;

      let disciplinasAdicionadas = [];

      diasDaSemana.forEach((dia) => {
        const checkbox = document.getElementById(dia.toLowerCase());

        if (checkbox.checked) {
          const existe = gradePorDia[dia].some(item => item.horario === horario);

          if (!existe) {
            gradePorDia[dia].push({ disciplina, professor, horario, sala });
            disciplinasAdicionadas.push(`${dia} às ${horario}`);
          }
        }
      });

      if (disciplinasAdicionadas.length > 0) {
        alert("Disciplinas adicionadas em: " + disciplinasAdicionadas.join(", "));
        document.getElementById("gradeForm").reset();
        atualizarTabelas();
      } else {
        alert("Nenhuma disciplina foi adicionada. Verifique os horários.");
      }

      // Limpa os checkboxes
      diasDaSemana.forEach((dia) => {
        document.getElementById(dia.toLowerCase()).checked = false;
      });
    });


    function atualizarTabelas() {
      const container = document.getElementById("gradeTables");
      container.innerHTML = "";

      diasDaSemana.forEach((dia) => {
        const disciplinas = gradePorDia[dia];
        disciplinas.sort((a, b) => a.horario.localeCompare(b.horario));

        const tabela = document.createElement("div");
        tabela.className = "mt-4";

        tabela.innerHTML = `
          <h4>${dia}</h4>
          <table class="table table-bordered">
            <thead class="thead-light">
              <tr>
                <th>Disciplina</th>
                <th>Professor</th>
                <th>Horário</th>
                <th>Sala</th>
              </tr>
            </thead>
            <tbody>
              ${disciplinas
            .map(
              (item) => `
                <tr>
                  <td>${item.disciplina}</td>
                  <td>${item.professor}</td>
                  <td>${item.horario}</td>
                  <td>${item.sala}</td>
                </tr>`
            )
            .join("")}
            </tbody>
          </table>
        `;

        container.appendChild(tabela);
      });
    }
  </script>


</body>

</html>